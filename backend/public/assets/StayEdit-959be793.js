import{j as e,S as N,r as d,F as w,G as b,H as u,J as g,K as C,b as y,k,a as f,i as S,u as I,q as B}from"./index-a1492c3f.js";function T({type:s,items:t,selectedValue:n,handleChange:a}){return e.jsx("div",{className:"btns grid",children:t.map(i=>e.jsxs("button",{onClick:()=>a(s,i.value),className:`btn ${n.includes(i.value)?"selected":""}`,children:[e.jsx("h2",{children:i.label||i.value}),e.jsx("p",{children:i.desc}),e.jsx(N,{name:i.value})]},i.value))})}function L({onUploaded:s=null,editStay:t,stay:n}){const[a,i]=d.useState(n.imgUrls||[]),c=d.useRef(null);async function r(o){const l=o.target.files,h=[];for(const m of l){const{secure_url:v}=await w.uploadImg({target:{files:[m]}});h.push(v)}const j=[...n.imgUrls||[],...h];t({...n,imgUrls:j}),i(j),s&&h.forEach(m=>s(m))}const p=()=>{c.current.click()},x=(o,l)=>{o.stopPropagation();const h=a.filter((j,m)=>m!==l);i(h),t({...n,imgUrls:h})};return e.jsxs("div",{className:"upload-preview",onClick:p,children:[!!a.length&&e.jsx("div",{className:"img-gallery",children:a.map((o,l)=>e.jsxs("div",{className:"img",children:[e.jsx("img",{src:o,alt:`Uploaded Image ${l}`}),e.jsx("button",{className:"delete-btn",onClick:h=>x(h,l)})]},l))}),!a.length&&e.jsx("div",{className:"replace-img-txt",children:"Add photos"}),e.jsx("input",{ref:c,type:"file",onChange:r,accept:"image/*",multiple:!0,style:{display:"none"}})]})}const E={0:M,1:V,2:P,3:R,4:U,5:A,6:F,7:H,8:W,9:D,10:$,11:G,12:O,13:Y,14:_,15:q,16:Z};function M(){const s=d.useRef(null);return d.useEffect(()=>{s.current&&s.current.play()},[]),e.jsxs("section",{className:"stage-0 grid",children:[e.jsx("h1",{children:"It’s easy to get started on Staybnb"}),e.jsxs("ol",{className:"grid",children:[e.jsxs("li",{children:[e.jsx("h2",{children:"1"}),e.jsx("h2",{children:"Tell us about your place"}),e.jsx("p",{children:"Share some basic info, like where it is and how many guests can stay."}),e.jsx("img",{src:"https://a0.muscache.com/4ea/air/v2/pictures/da2e1a40-a92b-449e-8575-d8208cc5d409.jpg"})]}),e.jsxs("li",{children:[e.jsx("h2",{children:"2"}),e.jsx("h2",{children:"Make it stand out"}),e.jsx("p",{children:"Add 5 or more photos plus a title and description—we’ll help you out."}),e.jsx("img",{src:"https://a0.muscache.com/4ea/air/v2/pictures/bfc0bc89-58cb-4525-a26e-7b23b750ee00.jpg"})]}),e.jsxs("li",{children:[e.jsx("h2",{children:"3"}),e.jsx("h2",{children:"Finish up and publish"}),e.jsx("p",{children:"Choose a starting price, verify a few details, then publish your listing."}),e.jsx("img",{src:"https://a0.muscache.com/4ea/air/v2/pictures/c0634c73-9109-4710-8968-3e927df1191c.jpg"})]})]})]})}function V(){const s=d.useRef(null);return d.useEffect(()=>{s.current&&s.current.play()},[]),e.jsxs("section",{className:"stage-1 title-stage",children:[e.jsx("p",{className:"step",children:"Step 1"}),e.jsx("h1",{className:"title",children:"Tell us about your place"}),e.jsx("p",{className:"description",children:"In this step, we'll ask you which type of property you have and if guests will book the entire place or just a room. Then let us know the location and how many guests can stay."}),e.jsx("video",{ref:s,src:"https://res.cloudinary.com/db7t5amdv/video/upload/v1713520620/BuildHouseVidIntro_tbrwcf.mp4",autoPlay:!0,muted:!0})]})}function P({stay:s,editStay:t}){function n(a,i){t(c=>({...c,propertyType:i}))}return e.jsxs("section",{className:"stage-2 buttons-section",children:[e.jsx("h1",{children:"Which of these best describes your place?"}),e.jsx(b,{type:"propertyType",items:u.propTypeItems,selectedValue:s.propertyType,handleChange:n})]})}function R({stay:s,editStay:t}){function n(a,i){t(c=>({...c,placeType:i}))}return e.jsxs("section",{className:"stage-3",children:[e.jsx("h1",{children:"What type of place will guests have?"}),e.jsx(T,{type:"placeType",items:u.placeTypeItemsEdit,selectedValue:s.placeType,handleChange:n})]})}function U({stay:s,editStay:t}){function n(a){const{id:i,value:c}=a.target,r={...s.loc,[i]:c},p={...s,loc:r};t(p)}return e.jsxs("section",{className:"stage-4",children:[e.jsx("h1",{children:"Where's your place located?"}),e.jsx("h2",{children:"Your address is only shared with guests after they’ve made a reservation."}),e.jsxs("form",{className:"grid",children:[e.jsxs("div",{className:"country",children:[e.jsx("label",{htmlFor:"country",children:"Country:"}),e.jsx("input",{type:"text",id:"country",value:s.loc.country,onChange:n})]}),e.jsxs("div",{className:"countryCode",children:[e.jsx("label",{htmlFor:"countryCode",children:"Country Code:"}),e.jsx("input",{type:"text",id:"countryCode",value:s.loc.countryCode,onChange:n})]}),e.jsxs("div",{className:"city",children:[e.jsx("label",{htmlFor:"city",children:"City:"}),e.jsx("input",{type:"text",id:"city",value:s.loc.city,onChange:n})]}),e.jsxs("div",{className:"address",children:[e.jsx("label",{htmlFor:"address",children:"Street & address"}),e.jsx("input",{type:"text",id:"address",value:s.loc.address,onChange:n})]}),e.jsx("div",{className:"coordinates"})," "]})]})}function A({stay:s,editStay:t}){const n=s.capacity===0,a=s.capacity===16,i=s.bbb.beds===0,c=s.bbb.beds===16,r=s.bbb.bathrooms===0,p=s.bbb.bathrooms===16,x=s.bbb.baths===0,o=s.bbb.baths===16;return e.jsxs("section",{className:"stage-5",children:[e.jsx("h1",{children:"Share some basics about your place"}),e.jsx("h2",{children:"You'll add more details later, like bed types."}),e.jsxs("form",{className:"grid",onSubmit:l=>{l.preventDefault()},children:[e.jsxs("div",{children:[e.jsx("h3",{children:"Guests"}),e.jsxs("div",{children:[e.jsx("button",{onClick:()=>t({...s,capacity:Math.max(s.capacity-1,0)}),className:n?"disabled":"",children:"-"}),e.jsx("span",{children:s.capacity}),e.jsx("button",{onClick:()=>t({...s,capacity:Math.min(s.capacity+1,16)}),className:a?"disabled":"",children:"+"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{children:"Bedrooms"}),e.jsxs("div",{children:[e.jsx("button",{onClick:()=>t(l=>({...l,bbb:{...l.bbb,beds:Math.max(l.bbb.beds-1,0)}})),className:i?"disabled":"",children:"-"}),e.jsx("span",{children:s.bbb.beds}),e.jsx("button",{onClick:()=>t(l=>({...l,bbb:{...l.bbb,beds:Math.min(l.bbb.beds+1,16)}})),className:c?"disabled":"",children:"+"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{children:"Bathrooms"}),e.jsxs("div",{children:[e.jsx("button",{onClick:()=>t(l=>({...l,bbb:{...l.bbb,bathrooms:Math.max(l.bbb.bathrooms-1,0)}})),className:r?"disabled":"",children:" - "}),e.jsx("span",{children:s.bbb.bathrooms}),e.jsx("button",{onClick:()=>t(l=>({...l,bbb:{...l.bbb,bathrooms:Math.min(l.bbb.bathrooms+1,16)}})),className:p?"disabled":"",children:" + "})]})]}),e.jsxs("div",{children:[e.jsx("h3",{children:"Baths"}),e.jsxs("div",{children:[e.jsx("button",{onClick:()=>t(l=>({...l,bbb:{...l.bbb,baths:Math.max(l.bbb.baths-1,0)}})),className:x?"disabled":"",children:" - "}),e.jsx("span",{children:s.bbb.baths}),e.jsx("button",{onClick:()=>t(l=>({...l,bbb:{...l.bbb,baths:Math.min(l.bbb.baths+1,16)}})),className:o?"disabled":"",children:"+"})]})]})]})]})}function F(){const s=d.useRef(null);return d.useEffect(()=>{s.current&&s.current.play()},[]),e.jsxs("section",{className:"stage-6 title-stage",children:[e.jsx("p",{className:"step",children:"Step 2"}),e.jsx("h1",{className:"title",children:"Make your place stand out"}),e.jsx("p",{className:"description",children:"In this step, you’ll add some of the amenities your place offers, plus 5 or more photos. Then, you’ll create a title and description."}),e.jsx("video",{ref:s,src:"https://res.cloudinary.com/db7t5amdv/video/upload/v1713520618/BuildHouseVidMiddle_u6k0ep.mp4",autoPlay:!0,muted:!0})]})}function H({stay:s,editStay:t}){function n(a,i){const c=s.amenities.includes(i)?s.amenities.filter(r=>r!==i):[...s.amenities,i];t({...s,amenities:c})}return e.jsxs("section",{className:"stage-7 buttons-section",children:[e.jsx("h1",{children:"Tell guests what your place has to offer"}),e.jsx("h2",{children:"You can add more amenities after you publish your listing."}),e.jsx("h3",{children:"What about these guest favorites?"}),e.jsx(b,{type:"editAmenities",items:[...u.amenityEssentialsShown,...u.amenityEssentialsHidden],selectedValue:s.amenities,handleChange:n}),e.jsx("h3",{children:"Do you have any standout amenities?"}),e.jsx(b,{type:"editAmenities",items:[...u.amenityFeatures,...u.amenityLocation],selectedValue:s.amenities,handleChange:n}),e.jsx("h3",{children:"Do you have any of these safety items?"}),e.jsx(b,{type:"editAmenities",items:u.amenitySafety,selectedValue:s.amenities,handleChange:n})]})}function W({stay:s,editStay:t}){return e.jsxs("section",{className:"stage-8",children:[e.jsx("h1",{children:"Add photos of your place"}),e.jsx("h2",{children:"You'll need 5 photos to get started. You can add more or make changes later."}),e.jsx(L,{editStay:t,stay:s})]})}function D({stay:s,editStay:t}){const[n,a]=d.useState(s.name),i=c=>{const r=c.target.value;r.length<=32?(a(r),t({...s,name:r})):a(r.slice(0,32))};return e.jsxs("section",{className:"stage-9",children:[e.jsx("h1",{children:"Now, let's give your place a title"}),e.jsx("h2",{children:"Short titles work best. Have fun with it—you can always change it later"}),e.jsx("input",{type:"text",value:n,onChange:i}),e.jsxs("span",{className:"counter",children:[n.length,"/32"]})]})}function $({stay:s,editStay:t}){function n(a,i){const c=s.labels.includes(i)?s.labels.filter(r=>r!==i):[...s.labels,i];t({...s,labels:c})}return e.jsxs("section",{className:"stage-10 buttons-section",children:[e.jsx("h1",{children:"Next, let's describe your place"}),e.jsx("h2",{children:"Choose highlights. We'll use these to get your description started."}),e.jsx(b,{type:"editLabels",items:u.filterLabels,selectedValue:s.labels,handleChange:n})]})}function G({stay:s,editStay:t}){const[n,a]=d.useState(s.summary),i=c=>{const r=c.target.value;r.length<=500?(a(r),t({...s,summary:r})):a(r.slice(0,500))};return e.jsxs("section",{className:"stage-11",children:[e.jsx("h1",{children:"Create your description"}),e.jsx("h2",{children:"Share what makes your place special."}),e.jsx("pre",{children:e.jsx("textarea",{value:n,onChange:i,rows:8,cols:50})}),e.jsxs("span",{className:"counter",children:[n.length,"/500"]})]})}function O(){const s=d.useRef(null);return d.useEffect(()=>{s.current&&s.current.play()},[]),e.jsxs("section",{className:"stage-12 title-stage",children:[e.jsx("p",{className:"step",children:"Step 3"}),e.jsx("h1",{className:"title",children:"Finish up and publish"}),e.jsx("p",{className:"description",children:"Finally, you’ll choose if you'd like to start with an experienced guest, then you'll set your nightly price. Answer a few quick questions and publish when you're ready."}),e.jsx("video",{ref:s,src:"https://res.cloudinary.com/db7t5amdv/video/upload/v1713520620/BuildHouseVidOutro_qiv9vd.mp4",autoPlay:!0,muted:!0})]})}function Y({stay:s,editStay:t}){function n(a,i){t(c=>({...c,bookingOpts:{...c.bookingOpts,[a]:i}}))}return e.jsxs("section",{className:"stage-13 grid",children:[e.jsx("h1",{children:"Decide your reservation options"}),e.jsxs("div",{className:"flex align-center space-between",children:[e.jsxs("div",{children:[e.jsx("h3",{children:"Instant Book"}),e.jsx("p",{children:"Require approval before guest can book"})]}),e.jsx(g,{type:"instant",value:s.bookingOpts.instant,handleChange:n})]}),e.jsxs("div",{className:"flex align-center space-between",children:[e.jsxs("div",{children:[e.jsx("h3",{children:"Self check-in"}),e.jsx("p",{children:"Easy access to the property once guest arrives"})]}),e.jsx(g,{type:"selfCheckIn",value:s.bookingOpts.selfCheckIn,handleChange:n})]}),e.jsxs("div",{className:"flex align-center space-between",children:[e.jsxs("div",{children:[e.jsx("h3",{children:"Allow pets"}),e.jsx("p",{children:"Allows pets and service animals."})]}),e.jsx(g,{type:"allowsPets",value:s.bookingOpts.allowsPets,handleChange:n})]})]})}function _({stay:s,editStay:t}){function n(a,i){const c=s.hostLngs.includes(i)?s.hostLngs.filter(r=>r!==i):[...s.hostLngs,i];t({...s,hostLngs:c})}return e.jsxs("section",{className:"stage-14 buttons-section",children:[e.jsx("h1",{children:"Next, let's add languages"}),e.jsx("h2",{children:"Choose languages spoken at your place."}),e.jsx(C,{type:"hostLngs",items:[...u.hostLngsShown,...u.hostLngsHidden],selectedValues:s.hostLngs,handleChange:n})]})}function q({stay:s,editStay:t}){const[n,a]=d.useState(s.price||""),i=c=>{const r=c.target.value;a(r),t({...s,price:+r})};return e.jsxs("section",{className:"stage-15",children:[e.jsx("h1",{children:"Lastly, set your price"}),e.jsx("h2",{children:"You can change it anytime."}),e.jsxs("div",{className:"flex align-center",children:[e.jsx("span",{children:"$"}),e.jsx("input",{type:"number",value:n,onChange:i})]}),e.jsx("p",{children:"per night"})]})}function Z({stay:s}){function t(n){return n.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}return e.jsxs("section",{className:"stage-16",children:[e.jsx("h1",{children:"Review your listing"}),e.jsx("h2",{children:"Here's what we'll show to guests. Make sure everything looks good."}),e.jsxs("div",{className:"preview-edit-page grid",children:[e.jsxs("article",{className:"edit-preview",children:[e.jsx("img",{src:s.imgUrls[0]}),e.jsxs("div",{className:"preview-text",children:[e.jsxs("div",{className:"info",children:[e.jsx("h4",{children:s.name}),e.jsxs("p",{children:["$",t(s.price),e.jsx("span",{className:"per-night",children:" night"})]})]}),e.jsxs("div",{className:"new",children:[e.jsx("span",{children:"New"}),"★"]})]})]}),e.jsxs("article",{className:"next-article",children:[e.jsx("h3",{children:"What's next?"}),e.jsxs("div",{children:[e.jsx("h4",{children:"Confirm a few details and publish"}),e.jsx("p",{children:"We’ll let you know if you need to verify your identity or register with the local government."})]}),e.jsxs("div",{children:[e.jsx("h4",{children:"Set up your calendar"}),e.jsx("p",{children:"Choose which dates your listing is available. It will be visible 24 hours after you publish."})]}),e.jsxs("div",{children:[e.jsx("h4",{children:"Adjust your settings"}),e.jsx("p",{children:"Set house rules, select a cancellation policy, choose how guests book, and more."})]})]})]})]})}function J({editStage:s,setEditStage:t,onSaveStay:n,stay:a}){const i=s*6.25+"%";function c(){switch(s){case 2:return!a.propertyType;case 3:return!a.placeType;case 4:return!a.loc.country||!a.loc.address||!a.loc.city;case 5:return a.capacity<1||a.bbb.bathrooms<1||a.bbb.beds<1;case 9:return!a.name;case 11:return!a.summary;case 15:return a.price<1;default:return!1}}return e.jsxs("section",{className:"progress-footer",children:[e.jsx("button",{onClick:()=>{s>0&&t(r=>r-1)},className:`back-btn ${s===0?"disabled":""}`,disabled:s===0,children:"Back"}),e.jsxs("div",{className:"continue-btns",children:[s<=0&&e.jsx("button",{onClick:()=>{c()||t(r=>r+1)},className:`start-btn ${c()?"disabled":""}`,children:"Get Started"}),s<16&&s>0&&e.jsx("button",{onClick:()=>{c()||t(r=>r+1)},className:`next-btn ${c()?"disabled":""}`,children:"Next"}),s>=16&&e.jsx("button",{onClick:n,className:"Publish-btn",children:"Publish"})]}),e.jsx("div",{className:"progress-bar-background"}),e.jsx("div",{className:"progress-bar-filling",style:{width:i}})]})}function K(){const s=y();function t(){s("/")}return e.jsxs("section",{className:"stay-edit-header flex align-center space-between",children:[e.jsx("img",{onClick:t,src:"/img/staybnb-logo.png",alt:"staybnb logo"}),e.jsxs("button",{onClick:t,className:"exit-btn flex center",children:[e.jsx("span",{className:"small",children:"Exit"}),e.jsx("span",{className:"wide",children:"Exit without saving"})]})]})}const Q=()=>{const s=k(),t=y(),[n,a]=d.useState(f.getEmptyStay()),[i,c]=d.useState(0);d.useEffect(()=>{s.stayId&&r()},[]);async function r(){try{const o=await f.getById(s.stayId);a(o)}catch(o){console.log(o)}}async function p(){try{const o=await S.getLoggedInUser(),l={...n,host:{...n.host,username:o.username,fullname:o.fullname,imgUrl:o.imgUrl,responseTime:I.getRandomIntInclusive(0,24)}},h=await B(l);t(`/${h._id}`)}catch(o){console.log(o)}}const x=E[i];return e.jsxs("section",{className:"stay-edit",children:[e.jsx(K,{}),e.jsx("main",{children:x&&e.jsx(x,{stay:n,editStay:a})}),e.jsx(J,{onSaveStay:p,stay:n,editStage:i,setEditStage:c})]})};export{Q as default};
